<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>åƒç´ ç”»æ¡†ä½œå“é›†</title>
  <style>
    :root {
      --sidebar-w: 240px;
      --gutter: 18px;
      --frame-border: 3px;
      --accent: #ffb84d;
      --bg: #d0e7ff;
    }

    html,
    body {
      height: 100%;
      margin: 0;
      font-family: "Noto Sans CJK SC", "Microsoft YaHei", "PingFang SC", "Segoe UI", Roboto, Arial, sans-serif;
      background: var(--bg);
    }

    .app {
      display: flex;
      height: 100vh;
      box-sizing: border-box;
      gap: var(--gutter);
      padding: var(--gutter);
    }

    .sidebar {
      width: var(--sidebar-w);
      background: #fff4d6;
      border-right: 4px solid #000;
      padding: 18px;
      box-shadow: 4px 0 0 #000;
      box-sizing: border-box
    }

    .sidebar h1 {
      font-size: 1.1rem;
      margin: 0 0 12px 0;
      text-transform: uppercase
    }

    .side-image {
      width: 100%;
      aspect-ratio: 1 / 1;
      border: 3px solid #000;
      box-shadow: 4px 4px 0 #000;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      background: #fff
    }

    .side-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      image-rendering: pixelated
    }

    .side-link {
      display: block;
      margin: 10px 0;
      padding: 8px 12px;
      text-decoration: none;
      color: #000;
      background: #fff;
      border: 2px solid #000;
      cursor: pointer;
      transition: all 0.1s;
    }

    .side-link:hover {
      background: #ffebb3;
    }

    .side-link.active {
      background: var(--accent);
      font-weight: bold;
      box-shadow: 2px 2px 0 #000;
    }

    .main {
      flex: 1;
      overflow: auto;
      padding: 6px 6px 36px 6px
    }

    .banner-frame {
      position: relative;
      height: 220px;
      border: 3px solid #000;
      background: #fff;
      box-shadow: 6px 6px 0 #000;
      overflow: hidden;
      resize: vertical;
      min-height: 120px;
    }

    .banner-frame::after {
      content: "";
      position: absolute;
      bottom: 0;
      right: 0;
      width: 20px;
      height: 20px;
      z-index: 2;
      cursor: ns-resize;
      background: transparent;
      pointer-events: auto;
    }

    .banner-frame img {
      pointer-events: none;
    }

    .panel {
      margin-top: 18px;
      border: 3px solid #000;
      background: #fff;
      padding: 12px;
      box-shadow: 6px 6px 0 #000;
      display: none;
    }

    .panel.active {
      display: block;
    }

    .panel h2 {
      margin: 0 0 8px 0
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 12px
    }

    .thumb {
      background: #cde8ff;
      border: 3px solid #000;
      min-height: 160px;
      position: relative;
      overflow: hidden;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      aspect-ratio: 3 / 4;
      box-shadow: 4px 4px 0 #000;
    }

    .thumb img,
    .thumb video {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
      image-rendering: pixelated
    }

    .thumb .placeholder {
      padding: 12px;
      text-align: center;
      color: #333
    }

    .thumb.dragging,
    .drop-zone.dragging {
      outline: 4px dashed rgba(0, 0, 0, 0.6)
    }

    .modal {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.8);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 9999
    }

    .modal .inner {
      max-width: 92%;
      max-height: 92%;
      border: 4px solid #fff;
      box-shadow: 0 0 0 6px rgba(255, 255, 255, 0.04)
    }

    .modal img,
    .modal video {
      max-width: 100%;
      max-height: 100%;
      display: block
    }

    .hint {
      font-size: 0.85rem;
      color: #333;
      margin-top: 6px
    }

    .package-btn {
      margin-top: 14px;
      width: 100%;
      padding: 10px;
      background: #ffb84d;
      border: 3px solid #000;
      box-shadow: 4px 4px 0 #000;
      font-weight: bold;
      cursor: pointer;
      font-size: 0.95rem;
      transition: all 0.1s;
    }

    .package-btn:hover {
      background: #ffa31a;
    }

    .package-btn:active {
      box-shadow: 2px 2px 0 #000;
      transform: translate(2px, 2px);
    }

    @media (max-width:900px) {
      .grid {
        grid-template-columns: repeat(2, 1fr)
      }

      .sidebar {
        display: none
      }
    }
  </style>
</head>

<body>
  <div class="app">
    <aside class="sidebar">
      <h1>åƒç´ ç”»æ¡†ä½œå“é›†</h1>
      <div class="side-image drop-zone" data-type="image" data-id="sidebar-image">
        <div class="placeholder">æ‹–æ‹½å¤´åƒ/è£…é¥°åˆ°æ­¤å¤„</div>
      </div>
      <nav style="margin-top:14px">
        <a class="side-link active" data-section="films">ğŸ¬ å½±è§†çŸ­ç‰‡</a>
        <a class="side-link" data-section="animation">ğŸï¸ åŠ¨ç”»çŸ­ç‰‡</a>
        <a class="side-link" data-section="illustration">ğŸ¨ æ’ç”»</a>
      </nav>
      <button class="package-btn" id="packageBtn">ğŸ“¦ æ‰“åŒ…ä¿å­˜</button>
      <div class="hint">æç¤º:æŠŠå›¾ç‰‡æˆ–è§†é¢‘ä»ç”µè„‘ç›´æ¥æ‹–åˆ°ä»»ä¸€ç”»æ¡†è¿›è¡Œä¸Šä¼ ã€‚ç‚¹å‡»"æ‰“åŒ…ä¿å­˜"åä¸‹è½½HTMLæ–‡ä»¶ã€‚</div>
    </aside>

    <main class="main">
      <div class="banner-frame drop-zone" data-type="image" data-id="banner">
        <div class="placeholder">é¡¶éƒ¨ç”»æ¡† â€” æ‹–æ‹½å›¾ç‰‡åˆ°è¿™é‡Œ,æ”¯æŒè°ƒæ•´é«˜åº¦(æ‹‰ä¼¸åº•éƒ¨è§’)</div>
      </div>

      <section id="films" class="panel active">
        <h2>å½±è§†çŸ­ç‰‡</h2>
        <div class="grid">
          <div class="thumb drop-zone" data-type="video" data-id="film-0">
            <div class="placeholder">æ‹–æ‹½è§†é¢‘/å›¾åˆ°æ­¤(3:4 é¢„è§ˆ)</div>
          </div>
          <div class="thumb drop-zone" data-type="video" data-id="film-1">
            <div class="placeholder">æ‹–æ‹½è§†é¢‘/å›¾åˆ°æ­¤(3:4 é¢„è§ˆ)</div>
          </div>
          <div class="thumb drop-zone" data-type="video" data-id="film-2">
            <div class="placeholder">æ‹–æ‹½è§†é¢‘/å›¾åˆ°æ­¤(3:4 é¢„è§ˆ)</div>
          </div>
          <div class="thumb drop-zone" data-type="video" data-id="film-3">
            <div class="placeholder">æ‹–æ‹½è§†é¢‘/å›¾åˆ°æ­¤(3:4 é¢„è§ˆ)</div>
          </div>
          <div class="thumb drop-zone" data-type="video" data-id="film-4">
            <div class="placeholder">æ‹–æ‹½è§†é¢‘/å›¾åˆ°æ­¤(3:4 é¢„è§ˆ)</div>
          </div>
        </div>
      </section>

      <section id="animation" class="panel">
        <h2>åŠ¨ç”»çŸ­ç‰‡</h2>
        <div class="grid">
          <div class="thumb drop-zone" data-type="video" data-id="anim-0">
            <div class="placeholder">æ‹–æ‹½è§†é¢‘/å›¾åˆ°æ­¤(3:4 é¢„è§ˆ)</div>
          </div>
          <div class="thumb drop-zone" data-type="video" data-id="anim-1">
            <div class="placeholder">æ‹–æ‹½è§†é¢‘/å›¾åˆ°æ­¤(3:4 é¢„è§ˆ)</div>
          </div>
          <div class="thumb drop-zone" data-type="video" data-id="anim-2">
            <div class="placeholder">æ‹–æ‹½è§†é¢‘/å›¾åˆ°æ­¤(3:4 é¢„è§ˆ)</div>
          </div>
          <div class="thumb drop-zone" data-type="video" data-id="anim-3">
            <div class="placeholder">æ‹–æ‹½è§†é¢‘/å›¾åˆ°æ­¤(3:4 é¢„è§ˆ)</div>
          </div>
          <div class="thumb drop-zone" data-type="video" data-id="anim-4">
            <div class="placeholder">æ‹–æ‹½è§†é¢‘/å›¾åˆ°æ­¤(3:4 é¢„è§ˆ)</div>
          </div>
        </div>
      </section>

      <section id="illustration" class="panel">
        <h2>æ’ç”»ä½œå“</h2>
        <div class="grid">
          <div class="thumb drop-zone" data-type="image" data-id="illus-0">
            <div class="placeholder">æ‹–æ‹½å›¾ç‰‡åˆ°æ­¤(3:4 é¢„è§ˆ)</div>
          </div>
          <div class="thumb drop-zone" data-type="image" data-id="illus-1">
            <div class="placeholder">æ‹–æ‹½å›¾ç‰‡åˆ°æ­¤(3:4 é¢„è§ˆ)</div>
          </div>
          <div class="thumb drop-zone" data-type="image" data-id="illus-2">
            <div class="placeholder">æ‹–æ‹½å›¾ç‰‡åˆ°æ­¤(3:4 é¢„è§ˆ)</div>
          </div>
          <div class="thumb drop-zone" data-type="image" data-id="illus-3">
            <div class="placeholder">æ‹–æ‹½å›¾ç‰‡åˆ°æ­¤(3:4 é¢„è§ˆ)</div>
          </div>
          <div class="thumb drop-zone" data-type="image" data-id="illus-4">
            <div class="placeholder">æ‹–æ‹½å›¾ç‰‡åˆ°æ­¤(3:4 é¢„è§ˆ)</div>
          </div>
        </div>
      </section>

      <footer style="margin-top:18px">Â© 2025 åƒç´ ç”»æ¡†ä½œå“é›†</footer>
    </main>
  </div>

  <div class="modal" id="modal">
    <div class="inner" id="modal-inner"></div>
  </div>

  <script>
    // Tab switching functionality
    const sideLinks = document.querySelectorAll('.side-link');
    const panels = document.querySelectorAll('.panel');

    sideLinks.forEach(link => {
      link.addEventListener('click', (e) => {
        e.preventDefault();
        const targetSection = link.getAttribute('data-section');

        // Remove active class from all links and panels
        sideLinks.forEach(l => l.classList.remove('active'));
        panels.forEach(p => p.classList.remove('active'));

        // Add active class to clicked link and corresponding panel
        link.classList.add('active');
        document.getElementById(targetSection).classList.add('active');
      });
    });

    // Drag and drop functionality
    const dropZones = document.querySelectorAll('.drop-zone');
    const modal = document.getElementById('modal');
    const modalInner = document.getElementById('modal-inner');

    dropZones.forEach(zone => {
      zone.addEventListener('dragover', (e) => {
        e.preventDefault();
        zone.classList.add('dragging');
      });

      zone.addEventListener('dragleave', () => {
        zone.classList.remove('dragging');
      });

      zone.addEventListener('drop', async (e) => {
        e.preventDefault();
        zone.classList.remove('dragging');

        const file = e.dataTransfer.files[0];
        if (!file) return;

        const isVideo = file.type.startsWith('video');
        const isImage = file.type.startsWith('image');

        if (!isVideo && !isImage) {
          alert('è¯·ä¸Šä¼ å›¾ç‰‡æˆ–è§†é¢‘æ–‡ä»¶');
          return;
        }

        // Create media element
        const media = isVideo ? document.createElement('video') : document.createElement('img');
        media.style.width = '100%';
        media.style.height = '100%';
        media.style.objectFit = 'cover';
        media.style.imageRendering = 'pixelated';

        // Read file as base64
        const reader = new FileReader();
        reader.onload = (event) => {
          media.src = event.target.result;
          if (isVideo) {
            media.controls = false;
            media.loop = true;
            media.muted = true;
            media.autoplay = true;
          }

          zone.innerHTML = '';
          zone.appendChild(media);

          // Add click to enlarge
          if (!zone.classList.contains('side-image')) {
            zone.onclick = () => {
              const clone = media.cloneNode(true);
              clone.style.maxWidth = '100%';
              clone.style.maxHeight = '100%';
              if (isVideo) {
                clone.controls = true;
              }
              modalInner.innerHTML = '';
              modalInner.appendChild(clone);
              modal.style.display = 'flex';
            };
          }
        };
        reader.readAsDataURL(file);
      });
    });

    // Close modal
    modal.addEventListener('click', () => {
      modal.style.display = 'none';
      modalInner.innerHTML = '';
    });

    // Package functionality
    document.getElementById('packageBtn').addEventListener('click', async () => {
      const btn = document.getElementById('packageBtn');
      btn.textContent = 'â³ æ‰“åŒ…ä¸­...';
      btn.disabled = true;

      try {
        // Clone the document
        const clone = document.documentElement.cloneNode(true);

        // Remove package button from clone
        const cloneBtn = clone.querySelector('#packageBtn');
        if (cloneBtn) cloneBtn.remove();

        // Remove hint from clone
        const cloneHint = clone.querySelector('.hint');
        if (cloneHint) cloneHint.remove();

        // Remove sidebar navigation links functionality
        const cloneNav = clone.querySelector('nav');
        if (cloneNav) cloneNav.remove();

        // Show all panels in exported version
        const clonePanels = clone.querySelectorAll('.panel');
        clonePanels.forEach(p => {
          p.style.display = 'block';
          p.classList.remove('active');
        });

        // Remove all drop-zone classes and dragging states
        const cloneDropZones = clone.querySelectorAll('.drop-zone');
        cloneDropZones.forEach(zone => {
          zone.classList.remove('drop-zone', 'dragging');
        });

        // Update sidebar styling for exported version
        const cloneSidebar = clone.querySelector('.sidebar');
        if (cloneSidebar) {
          const sidebarH1 = cloneSidebar.querySelector('h1');
          if (sidebarH1) {
            sidebarH1.style.marginBottom = '18px';
          }
        }

        // Create a minimal script for the exported version
        const cloneScript = clone.querySelector('script');
        if (cloneScript) {
          cloneScript.textContent = `
            // Modal functionality for viewing images/videos
            const modal = document.getElementById('modal');
            const modalInner = document.getElementById('modal-inner');
            
            // Add click to enlarge for all media elements
            document.querySelectorAll('.thumb').forEach(zone => {
              const media = zone.querySelector('img, video');
              if (media && !zone.querySelector('.placeholder')) {
                zone.style.cursor = 'pointer';
                zone.onclick = () => {
                  const clone = media.cloneNode(true);
                  clone.style.maxWidth = '100%';
                  clone.style.maxHeight = '100%';
                  clone.style.objectFit = 'contain';
                  if (clone.tagName === 'VIDEO') {
                    clone.controls = true;
                    clone.muted = false;
                  }
                  modalInner.innerHTML = '';
                  modalInner.appendChild(clone);
                  modal.style.display = 'flex';
                };
              } else if (!media || zone.querySelector('.placeholder')) {
                zone.style.cursor = 'default';
              }
            });
            
            // Close modal on click
            modal.addEventListener('click', (e) => {
              if (e.target === modal || e.target === modalInner) {
                modal.style.display = 'none';
                modalInner.innerHTML = '';
              }
            });
            
            // Close modal on ESC key
            document.addEventListener('keydown', (e) => {
              if (e.key === 'Escape' && modal.style.display === 'flex') {
                modal.style.display = 'none';
                modalInner.innerHTML = '';
              }
            });
          `;
        }

        // Update CSS for exported version - remove hover effects for drop zones
        const cloneStyle = clone.querySelector('style');
        if (cloneStyle) {
          cloneStyle.textContent = cloneStyle.textContent.replace(
            /\.thumb\.dragging,\s*\.drop-zone\.dragging\s*{[^}]*}/g,
            ''
          );
        }

        // Get the HTML content
        const htmlContent = '<!DOCTYPE html>\n' + clone.outerHTML;

        // Create a blob and download
        const blob = new Blob([htmlContent], { type: 'text/html;charset=utf-8' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;

        // Create a more descriptive filename with date
        const now = new Date();
        const dateStr = `${now.getFullYear()}${String(now.getMonth() + 1).padStart(2, '0')}${String(now.getDate()).padStart(2, '0')}`;
        a.download = `åƒç´ ç”»æ¡†ä½œå“é›†_${dateStr}.html`;

        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);

        btn.textContent = 'âœ… æ‰“åŒ…å®Œæˆ!';
        setTimeout(() => {
          btn.textContent = 'ğŸ“¦ æ‰“åŒ…ä¿å­˜';
          btn.disabled = false;
        }, 2000);
      } catch (error) {
        console.error('æ‰“åŒ…å¤±è´¥:', error);
        btn.textContent = 'âŒ æ‰“åŒ…å¤±è´¥';
        setTimeout(() => {
          btn.textContent = 'ğŸ“¦ æ‰“åŒ…ä¿å­˜';
          btn.disabled = false;
        }, 2000);
      }
    });
  </script>
</body>

</html>